<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AROGYA MITRA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        /* Define the new Dark/Neon Palette */

        /* Chatbot Styles (keep separate from your page styles) */
        #chatbot {
            position: fixed;
            bottom: 65px;
            right: 20px;
            width: 320px;
            height: 420px;
            background: #111827;
            border: 1px solid #00FFFF;
            border-radius: 12px;
            display: none;
            flex-direction: column;
            z-index: 999;
            box-shadow: 0 0 20px rgba(231, 233, 233, 0.5);
        }

        #chat-header {
            background: #00FFFF;
            color: #000;
            font-weight: bold;
            padding: 10px;
            text-align: center;
            border-radius: 12px 12px 0 0;
        }

        #logs {
            flex: 1;
            padding: 10px;
            overflow-y: auto;
            font-size: 14px;
        }

        .user-msg {
            background: #34d399;
            color: #064e3b;
            padding: 6px 10px;
            border-radius: 8px;
            margin: 5px 0;
            text-align: right;
            max-width: 80%;
            margin-left: auto;
        }

        .bot-msg {
            background: #60a5fa;
            color: #1e3a8a;
            padding: 6px 10px;
            border-radius: 8px;
            margin: 5px 0;
            text-align: left;
            max-width: 80%;
        }

        /* Styles for Alert Messages (Kept for chat log, though full-page alerts are primary) */
        .alert-red {
            background: #ef4444;
            /* Tailwind red-500 */
            color: #fee2e2;
            /* Tailwind red-100 */
            font-weight: bold;
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
        }

        .alert-yellow {
            background: #f59e0b;
            /* Tailwind amber-500 */
            color: #fff;
            text-align: center;
            padding: 8px;
            border-radius: 8px;
            margin: 8px 0;
        }

        .alert-blue {
            background: #3b82f6;
            /* Tailwind blue-500 */
            color: #eff6ff;
            /* Tailwind blue-50 */
            text-align: center;
            padding: 8px;
            border-radius: 8px;
            margin: 8px 0;
        }

        /* Chatbot Controls - FIX APPLIED HERE */
        #controls {
            display: flex;
            align-items: center; /* FIX: Center vertically to ensure buttons and input are aligned */
            padding: 10px;
            border-top: 1px solid #00FFFF;
        }

        /* Input Text Visibility */
        #userInput {
            flex: 1;
            padding: 8px;
            margin-right: 5px;
            border: 1px solid #374151;
            border-radius: 6px;
            background-color: #1f2937;
            /* Dark background */
            color: white;
            outline: none;
            transition: border-color 0.3s;
            /* FIX: Set a consistent height based on padding, important for alignment */
            height: 38px; 
            box-sizing: border-box; 
        }

        #userInput:focus {
            border-color: #00FFFF;
        }

        /* --- ENHANCED BUTTON STYLES (Send and Mic) --- */
        #controls button {
            background: #00FFFF;
            color: #000;
            border: none;
            /* FIX: Use consistent padding/height and remove margin-left */
            padding: 0 12px; 
            height: 38px; /* Match input height */
            line-height: 38px; /* Center text vertically if needed */
            
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 2px 5px rgba(0, 255, 255, 0.5); /* Neon Glow for buttons */
        }
        
        /* FIX: Re-introduce a slight margin between buttons */
        #controls button:not(:last-child) {
            margin-right: 5px; 
        }
        
        #controls button:hover {
            background: #00e5e5;
            transform: scale(1.05); /* Enhanced hover effect */
        }
        
        /* Specific style for the microphone button to ensure consistent height/padding */
        #controls #micButton {
            /* No extra padding needed, height and line-height handle alignment */
            width: 38px; /* Make it a square for a better look */
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 16px; 
        }
        /* --- END ENHANCED BUTTON STYLES --- */

        /* --- FULL PAGE OVERLAY STYLES --- */
        .full-page-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            backdrop-filter: blur(5px);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease-in-out;
        }

        .full-page-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }

        /* RED ALERT: PULSATING DANGER */
        #alert-red-overlay {
            background-color: rgba(239, 68, 68, 0.95);
            /* Semi-transparent Red */
        }

        #alert-red-overlay.active .alert-box {
            animation: pulse-red-box 1.5s infinite;
        }

        @keyframes pulse-red-box {
            0% {
                transform: scale(1);
                box-shadow: 0 0 20px 5px rgba(255, 0, 0, 0.8);
            }

            50% {
                transform: scale(1.05);
                box-shadow: 0 0 40px 10px rgba(255, 0, 0, 1);
            }

            100% {
                transform: scale(1);
                box-shadow: 0 0 20px 5px rgba(255, 0, 0, 0.8);
            }
        }

        /* YELLOW ALERT: CAUTION */
        #alert-yellow-overlay {
            background-color: rgba(245, 158, 11, 0.95);
            /* Semi-transparent Yellow/Amber */
        }

        /* BLUE ALERT: MILD INFO */
        #alert-blue-overlay {
            background-color: rgba(59, 130, 246, 0.9);
            /* Semi-transparent Blue */
        }

        .alert-box {
            background: #1f2937;
            color: white;
            padding: 40px;
            border-radius: 15px;
            max-width: 80%;
            min-width: 400px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        /* Chat Toggle Icon Styles */
        #chat-toggle {
            position: fixed;
            bottom: 15px;
            right: 20px;
            background: #3b82f6;
            /* Default Blue */
            color: #fff;
            padding: 12px 18px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.7);
            /* Default Blue Glow */
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        #chat-toggle.alert-red {
            background: #ef4444;
            /* Red */
            box-shadow: 0 0 15px rgba(239, 68, 68, 0.7);
            animation: pulse-toggle 1.5s infinite;
        }

        #chat-toggle.alert-yellow {
            background: #f59e0b;
            /* Yellow */
            box-shadow: 0 0 15px rgba(245, 158, 11, 0.7);
        }

        @keyframes pulse-toggle {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }

            100% {
                transform: scale(1);
            }
        }

        :root {
            --color-bg-dark: #0A192F;
            --color-accent-neon: #00FFFF;
            --color-accent-glow: #8A2BE2;
            --color-text-light: #E0FFFF;
        }

        .font-inter {
            font-family: 'Inter', sans-serif;
        }

        .hero-bg-ai {
            background-color: var(--color-bg-dark);
            background-image: linear-gradient(0deg, transparent 24%, var(--color-bg-dark) 25%, var(--color-bg-dark) 26%, transparent 27%, transparent 74%, var(--color-bg-dark) 75%, var(--color-bg-dark) 76%, transparent 77%), linear-gradient(90deg, transparent 24%, var(--color-bg-dark) 25%, var(--color-bg-dark) 26%, transparent 27%, transparent 74%, var(--color-bg-dark) 75%, var(--color-bg-dark) 76%, transparent 77%);
            background-size: 50px 50px;
            position: relative;
        }

        .text-neon {
            color: var(--color-accent-neon);
            text-shadow: 0 0 5px var(--color-accent-neon), 0 0 10px rgba(0, 255, 255, 0.5);
        }

        .card-glow {
            border: 1px solid rgba(0, 255, 255, 0.3);
            box-shadow: 0 0 15px rgba(138, 43, 226, 0.5);
            transition: all 0.3s;
        }

        .card-glow:hover {
            box-shadow: 0 0 25px var(--color-accent-neon);
            transform: scale(1.03);
            border-color: var(--color-accent-neon);
        }
    </style>
</head>

<body class="font-inter antialiased bg-[--color-bg-dark] text-[--color-text-light]">

    <header class="hero-bg-ai min-h-[85vh] flex items-center justify-center pt-20 pb-40 relative overflow-hidden">

        <div class="absolute inset-0 opacity-10">
            <div class="h-full w-full bg-[radial-gradient(#00FFFF40_1px,transparent_1px)] bg-[size:20px_20px]"></div>
        </div>

        <div class="container mx-auto px-4 relative z-10 text-center">

            <h1 class="text-5xl md:text-7xl font-light mb-4 tracking-tight">
                <span class="text-white">AROGYA</span> <span class="text-neon font-bold">MITRA</span>
            </h1>
            <p class="text-lg md:text-xl text-gray-300 mb-12 max-w-3xl mx-auto font-light">
                ‚ÄúSmart care, anytime, anywhere.‚Äù
            </p>

            <div id="ai-prompt-box"
                class="bg-gray-800 bg-opacity-80 rounded-xl p-6 shadow-2xl max-w-xl mx-auto border border-[--color-accent-glow]">
                <div class="flex items-start text-center justify-center mb-4">
                    <span class="text-neon font-mono text-lg"> -ArogyaMitra AI Health Assistant-</span>
                </div>
            </div>
        </div>

        <div class="container mx-auto px-4 absolute bottom-0 left-0 right-0 translate-y-1/2 z-20">
            <div class="grid md:grid-cols-3 gap-6">

                <div class="bg-gray-800 rounded-lg shadow-xl p-6 card-glow transition duration-300">
                    <h2 class="text-2xl font-semibold text-neon mb-2">Emergency alert and notifications</h2>
                    <p class="text-gray-400 mb-4 text-sm">Enable notifications for critical health </p>
                    <a href="#"
                        class="inline-block px-4 py-2 bg-transparent text-neon font-medium rounded-full text-sm border border-neon hover:bg-neon hover:text-[--color-bg-dark] transition">View
                        Live Metrics</a>
                </div>

                <div class="bg-gray-800 rounded-lg shadow-xl p-6 card-glow transition duration-300">
                    <h3 class="text-2xl font-semibold text-neon mb-2">Electronic Health Records integration</h3>
                    <p class="text-gray-400 mb-4 text-sm">Access to Electronic Health Records</p>
                    <a href="#"
                        class="inline-block px-4 py-2 bg-transparent text-neon font-medium rounded-full text-sm border border-neon hover:bg-neon hover:text-[--color-bg-dark] transition">Check
                        Alert Log</a>
                </div>

                <div class="bg-gray-800 rounded-lg shadow-xl p-6 card-glow transition duration-300">
                    <h2 class="text-2xl font-semibold text-neon mb-2">Virtual Consultation</h2>
                    <p class="text-gray-400 mb-4 text-sm">Direct Doctor to patient interaction any.</p>
                    <a href="#"
                        class="inline-block px-4 py-2 bg-transparent text-neon font-medium rounded-full text-sm border border-neon hover:bg-neon hover:text-[--color-bg-dark] transition">Set
                        Alert Thresholds</a>
                </div>

            </div>
        </div>
    </header>

    <section id="ai-why" class="py-16 bg-gray-900 border-t border-b border-[--color-accent-neon]/20 relative z-30">
        <div class="container mx-auto px-4 max-w-4xl">
            <h2 class="text-3xl font-bold text-neon mb-10 text-center">
                &gt; The Value of Continuous <span class="text-white">AI Health Monitoring</span>
            </h2>
            <div class="grid md:grid-cols-3 gap-8 text-center pt-4">

                <div
                    class="p-6 rounded-lg bg-gray-800 border border-gray-700 hover:border-neon transition duration-300 shadow-xl">
                    <span class="text-4xl text-neon block mb-2 font-mono">24/7</span>
                    <h4 class="text-xl font-semibold text-white mb-2">Early Detection</h4>
                    <p class="text-gray-400 text-sm">Identify minor deviations from your health baseline before symptoms
                        become clinically apparent.</p>
                </div>

                <div
                    class="p-6 rounded-lg bg-gray-800 border border-gray-700 hover:border-neon transition duration-300 shadow-xl">
                    <span class="text-4xl text-neon block mb-2 font-mono"></span>
                    <h4 class="text-xl font-semibold text-white mb-2">Advance Health Alert</h4>
                    <p class="text-gray-400 text-sm">Receive instant notifications for high-risk bio-events, enabling
                        immediate consultation.</p>
                </div>

                <div
                    class="p-6 rounded-lg bg-gray-800 border border-gray-700 hover:border-neon transition duration-300 shadow-xl">
                    <span class="text-4xl text-neon block mb-2 font-mono">1:1</span>
                    <h4 class="text-xl font-semibold text-white mb-2">custom health profile</h4>
                    <p class="text-gray-400 text-sm">The AI learns your unique biology, ensuring alerts are relevant and
                        not false positives.</p>
                </div>

            </div>
        </div>
    </section>

    <section id="features" class="py-24 bg-[--color-bg-dark] border-t border-gray-700/50">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl md:text-4xl font-light text-center mb-16 text-white">System Monitoring Protocols</h2>

            <div class="grid md:grid-cols-3 gap-12 text-center">

                <div class="flex flex-col items-center">
                    <div
                        class="w-16 h-16 rounded-full bg-gray-900 border-2 border-neon flex items-center justify-center mb-4 card-glow">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-neon" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <polyline points="16 18 22 12 16 6" />
                            <polyline points="8 6 2 12 8 18" />
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2 text-white"> Real-Time Vital Sync</h3>
                    <p class="text-gray-400 mb-3 text-sm">High-fidelity ingestion and processing of data from wearables
                        and clinical devices</p>
                </div>

                <div class="flex flex-col items-center">
                    <div
                        class="w-16 h-16 rounded-full bg-gray-900 border-2 border-neon flex items-center justify-center mb-4 card-glow">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-neon" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2 text-white">Encrypted Data Vault</h3>
                    <p class="text-gray-400 mb-3 text-sm">Your personal health history is protected by proprietary
                        quantum-resistant encryption standards.</p>
                </div>

                <div class="flex flex-col items-center">
                    <div
                        class="w-16 h-16 rounded-full bg-gray-900 border-2 border-neon flex items-center justify-center mb-4 card-glow">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-neon" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3" />
                            <path d="M12 19c-2 0-3.5-1.12-4-2.5h8c-.5 1.38-2 2.5-4 2.5z" />
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2 text-white">Automated Consult Scheduling</h3>
                    <p class="text-gray-400 mb-3 text-sm">AI automatically connects you with a human specialist when a
                        critical condition is detected.</p>
                </div>

            </div>
        </div>
    </section>

    <section id="newsletter" class="py-20 bg-gray-900 border-t border-b border-gray-700/50">
        <div class="container mx-auto px-4 max-w-2xl text-center">
            <h2 class="text-3xl md:text-4xl font-light mb-4 text-white">Stay informed Stay alert</h2>
            <p class="text-gray-400 mb-8">Receive notifications on patient health trends and Emergency events in Real-Time</p>

            <button type="submit"
                class="w-full md:w-1/2 lg:w-1/3 mx-auto px-6 py-3 bg-neon text-[--color-bg-dark] font-bold rounded-lg shadow-xl shadow-neon/30 hover:bg-opacity-80 transition duration-300">
                Execute Subscription Command
            </button>
        </div>
    </section>

    <footer id="footer" class="bg-gray-900 py-8">
        <div class="container mx-auto px-4 text-sm text-gray-500">

            <div class="flex flex-col md:flex-row justify-between items-center border-b border-gray-800 pb-4 mb-4">
                <div class="mb-4 md:mb-0 text-center md:text-left">
                    <p class="mb-1">AROGYA MITRA | Protected by Neural Network Protocol</p>
                </div>
                <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4 text-center">
                    <span class="whitespace-nowrap text-neon">Access Node: 500.TF.94158</span>
                    <span class="hidden sm:inline">|</span>
                    <span class="whitespace-nowrap">Contact: 123-456-7890</span>
                </div>
            </div>
            <section id="patient-data" class="py-20 bg-[--color-bg-dark] border-b border-gray-700/50">
                <div class="container mx-auto px-4 max-w-xl">
                    <h2 class="text-3xl font-bold text-neon mb-6 text-center">
                        &gt; Initialize Patient Profile
                    </h2>
                    <div class="bg-gray-800 rounded-lg shadow-2xl p-8 card-glow">
                        <p class="text-gray-400 mb-8 text-center text-sm">Please verify your identity data for profile activation and personalized monitoring.</p>

                        <form class="space-y-6">
                            <div class="relative">
                                <label for="pName" class="block text-sm font-medium text-gray-300 mb-1">Full Name</label>
                                <input type="text" id="pName" placeholder="Enter Full Legal Name" required
                                    class="w-full py-3 px-4 bg-transparent border-b border-gray-600 focus:border-neon focus:outline-none transition duration-300 placeholder-gray-500 text-white">
                            </div>

                            <div class="relative">
                                <label for="pMobile" class="block text-sm font-medium text-gray-300 mb-1">Mobile Contact</label>
                                <input type="tel" id="pMobile" placeholder="Enter 10-digit Mobile Number" required
                                    class="w-full py-3 px-4 bg-transparent border-b border-gray-600 focus:border-neon focus:outline-none transition duration-300 placeholder-gray-500 text-white">
                            </div>

                            <div class="relative">
                                <label for="pAge" class="block text-sm font-medium text-gray-300 mb-1">Age (Chronological Index)</label>
                                <input type="number" id="pAge" placeholder="Enter Age in Years" required min="1" max="120"
                                    class="w-full py-3 px-4 bg-transparent border-b border-gray-600 focus:border-neon focus:outline-none transition duration-300 placeholder-gray-500 text-white">
                            </div>

                            <button type="submit"
                                class="w-full mt-8 px-6 py-3 bg-neon text-[--color-bg-dark] font-bold rounded-lg shadow-xl shadow-neon/30 hover:bg-opacity-80 transition duration-300">
                                Activate Profile Data Sync
                            </button>
                        </form>

                        <div class="flex justify-end space-x-4">
                            <a href="#" class="text-gray-500 hover:text-neon transition">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M12 2C6.477 2 2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.873V15.4h-2.148v-3.473H10.4v-2.138c0-2.095 1.258-3.243 3.155-3.243.898 0 1.673.064 1.895.092v3.011l-1.785.001c-.96 0-1.146.457-1.146 1.127v1.45H16l-.261 3.473h-3.342V21.873C18.343 21.128 22 16.991 22 12 22 6.477 17.523 2 12 2z" />
                                </svg>
                            </a>
                            <a href="#" class="text-gray-500 hover:text-neon transition">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M18.901 1.954h3.585l-7.568 9.244L24 22.046h-7.852l-5.643-7.567L4.76 22.046H1.284L9.43 12.593 1.954 1.954h7.942L14.4 7.641zM2.81 2.949L21.282 21.05h-2.152L.658 2.949h2.152z" />
                                </svg>
                            </a>
                        </div>
                    </div>

                </div>
            </section>
        </div>
    </footer>

    <div id="alert-red-overlay" class="full-page-overlay">
        <div class="alert-box">
            <h2 class="text-6xl font-extrabold text-red-500 mb-4 animate-pulse">üî¥ EMERGENCY ALERT üî¥</h2>
            <p class="text-2xl font-semibold mb-6">Immediate medical assistance is required for your symptoms.</p>
            <p class="text-5xl font-mono text-white mb-8 p-4 bg-red-700 rounded-lg">
                AMBULANCE: <a href="tel:102" class="underline">102</a> / <a href="tel:108" class="underline">108</a>
            </p>
            <p class="text-lg mb-8 text-gray-300">Stay calm and call the number above or proceed to the nearest emergency room.</p>
            <button onclick="dismissAlert('red')"
                class="px-8 py-3 bg-white text-gray-900 font-bold rounded-full shadow-lg hover:bg-gray-200 transition">
                I Have Called / Dismiss
            </button>
        </div>
    </div>

    <div id="alert-yellow-overlay" class="full-page-overlay">
        <div class="alert-box">
            <h2 class="text-4xl font-extrabold text-yellow-300 mb-6">üü° INTERMEDIATE ALERT üü°</h2>
            <p class="text-xl font-semibold mb-8">Your symptoms require consultation. We advise contacting a doctor:</p>
            
            <div class="text-left bg-gray-700 p-6 rounded-lg mb-8 space-y-4">
                <p class="text-lg text-white font-bold border-b border-yellow-500 pb-2">NEARBY DOCTORS:</p>
                <div class="text-gray-200">
                    <p>üë®‚Äç‚öïÔ∏è Dr. Sahil (General Practice)</p>
                    <p class="text-sm text-yellow-300">Call: <a href="tel:9876543210">98765 43210</a> | Distance: 1.5 km</p>
                </div>
                <div class="text-gray-200">
                    <p>üë©‚Äç‚öïÔ∏è Dr. Nikitha (Internal Medicine)</p>
                    <p class="text-sm text-yellow-300">Call: <a href="tel:9988776655">99887 76655</a> | Distance: 3.2 km</p>
                </div>
            </div>
            
            <button onclick="dismissAlert('yellow')"
                class="px-8 py-3 bg-yellow-400 text-gray-900 font-bold rounded-full shadow-lg hover:bg-yellow-500 transition">
                Acknowledge & Return to Chat
            </button>
        </div>
    </div>

    <div id="alert-blue-overlay" class="full-page-overlay">
        <div class="alert-box">
            <h2 class="text-4xl font-extrabold text-blue-400 mb-6">üîµ NORMAL ALERT üîµ</h2>
            <p class="text-xl font-semibold mb-8">Your symptoms are mild. Please follow the initial advice and monitor yourself.</p>
            <button onclick="dismissAlert('blue')"
                class="px-8 py-3 bg-blue-500 text-white font-bold rounded-full shadow-lg hover:bg-blue-600 transition">
                Acknowledge & Return
            </button>
        </div>
    </div>


    <div id="chatbot">
        <div id="chat-header"><i class="fas fa-robot"></i> Arogya AI Bot</div>
        <div id="logs">
            <p class="bot-msg">Hello! I am your AI health assistant. How can I help you today? (Try typing: chest pain, fever, or headache)</p>
        </div>
        <div id="controls">
            <input type="text" id="userInput" placeholder="Type your symptoms...">
            <button onclick="sendMessage()">Send</button>
            <button id="micButton" onclick="startListening()"><i class="fas fa-microphone"></i></button>
        </div>
    </div>

    <div id="chat-toggle" onclick="toggleChat()"><i class="fas fa-robot"></i></div>

    <script>
        const chatbot = document.getElementById('chatbot');
        const logs = document.getElementById('logs');
        const userInput = document.getElementById('userInput');
        const chatToggle = document.getElementById('chat-toggle');

        const redOverlay = document.getElementById('alert-red-overlay');
        const yellowOverlay = document.getElementById('alert-yellow-overlay');
        const blueOverlay = document.getElementById('alert-blue-overlay');

        function toggleChat() {
            // Toggles visibility
            chatbot.style.display = chatbot.style.display === "flex" ? "none" : "flex";
            // Clears any temporary alert state on close, reverting to default.
            if (chatbot.style.display === "none") {
                updateChatToggleColor('normal');
            }
        }

        /**
         * Updates the floating chat icon's color and glow based on severity.
         * @param {string} severity - 'emergency', 'intermediate', or 'normal'
         */
        function updateChatToggleColor(severity) {
            chatToggle.classList.remove('alert-red', 'alert-yellow');

            if (severity === 'emergency') {
                chatToggle.classList.add('alert-red');
            } else if (severity === 'intermediate') {
                chatToggle.classList.add('alert-yellow');
            }
            // else: it reverts to the default blue color defined in CSS
        }

        /**
         * Shows the full-page overlay corresponding to the severity.
         * Hides the chatbot and disables further input until dismissed.
         * @param {string} severity - 'emergency', 'intermediate', or 'normal'
         */
        function showFullPageAlert(severity) {
            chatbot.style.display = "none";
            updateChatToggleColor(severity);

            if (severity === 'emergency') {
                redOverlay.classList.add('active');
            } else if (severity === 'intermediate') {
                yellowOverlay.classList.add('active');
            } else if (severity === 'normal') {
                blueOverlay.classList.add('active');
                // Auto-dismiss the blue alert quickly as it's just informational
                setTimeout(() => dismissAlert('blue'), 3000); 
            }
        }
        
        /**
         * Dismisses the currently active alert overlay.
         * @param {string} severity - 'red', 'yellow', or 'blue'
         */
        function dismissAlert(severity) {
            if (severity === 'red') {
                redOverlay.classList.remove('active');
            } else if (severity === 'yellow') {
                yellowOverlay.classList.remove('active');
            } else if (severity === 'blue') {
                blueOverlay.classList.remove('active');
            }

            // Restore chat functionality and revert icon color
            toggleChat(); // Re-opens the chat box
            updateChatToggleColor('normal');
        }


        function addLog(sender, message, alertClass = null) {
            const p = document.createElement('p');
            // If an alert class is passed, use it, otherwise use normal sender classes
            if (alertClass) {
                p.classList.add(alertClass);
            } else {
                p.classList.add(sender === "you" ? "user-msg" : "bot-msg");
            }
            p.textContent = message;
            logs.appendChild(p);
            logs.scrollTop = logs.scrollHeight;
        }

        function speak(text) {
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.rate = 1;
            utterance.pitch = 1;
            speechSynthesis.speak(utterance);
        }

        // Symptom Checker & Triage Logic
        function checkSymptom(text) {
            const symptoms = {
                // EMERGENCY - RED ALERT
                "chest pain": {
                    severity: 'emergency',
                    response: "‚ö†Ô∏è CRITICAL EMERGENCY: Seek immediate medical care. Full-page alert activated."
                },
                "difficulty breathing": {
                    severity: 'emergency',
                    response: "‚ö†Ô∏è CRITICAL EMERGENCY: This requires immediate attention. Full-page alert activated."
                },
                "sudden numbness": {
                    severity: 'emergency',
                    response: "‚ö†Ô∏è CRITICAL EMERGENCY: Do not hesitate. Full-page alert activated."
                },
                // INTERMEDIATE - YELLOW ALERT
                "fever": {
                    severity: 'intermediate',
                    response: "INTERMEDIATE RISK: Monitor your temperature closely. Consultation is advised. Full-page alert activated."
                },
                "stomach pain": {
                    severity: 'intermediate',
                    response: "INTERMEDIATE RISK: If the pain is severe or worsens rapidly, consult a doctor. Full-page alert activated."
                },
                "vomiting": {
                    severity: 'intermediate',
                    response: "INTERMEDIATE RISK: Risk of dehydration. Consult a doctor if frequent or severe. Full-page alert activated."
                },
                // NORMAL - BLUE ALERT
                "headache": {
                    severity: 'normal',
                    response: "NORMAL RISK: Mild headaches usually improve with hydration and rest."
                },
                "cough": {
                    severity: 'normal',
                    response: "NORMAL RISK: Might be a common cold. Monitor symptoms."
                },
                "dizziness": {
                    severity: 'normal',
                    response: "NORMAL RISK: Could be dehydration or low blood sugar. Rest and hydrate."
                }
            };

            for (const key in symptoms) {
                if (text.includes(key)) {
                    return symptoms[key];
                }
            }

            // Default response if no specific symptom is found
            return {
                severity: 'normal',
                response: "I'm not sure about those exact symptoms. If you feel unwell, please consider scheduling a consultation with a healthcare professional."
            };
        }

        function handleCommand(text) {
            const result = checkSymptom(text);

            // 1. Add the main Bot Response Log (briefly)
            addLog("bot", result.response, `alert-${result.severity === 'emergency' ? 'red' : result.severity === 'intermediate' ? 'yellow' : 'blue'}`);

            // 2. Trigger the Full-Page Alert
            showFullPageAlert(result.severity);
            
            // 3. Update the floating icon (it's done inside showFullPageAlert now)
            
            // 4. Speak the primary instruction for audible alert
            if (result.severity === 'emergency') {
                 speak("Critical emergency. Call the ambulance right now.");
            } else if (result.severity === 'intermediate') {
                 speak("Intermediate risk. Please review the suggested doctor information on your screen.");
            } else {
                 speak("Normal risk. Please follow the advice on your screen.");
            }
        }

        function sendMessage() {
            const text = userInput.value.trim().toLowerCase();
            if (!text) return;
            addLog("you", text);
            userInput.value = "";
            handleCommand(text);
        }

        // Voice recognition logic (kept simple)
        function startListening() {
            const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.lang = "en-US";
            recognition.start();

            recognition.onresult = function(event) {
                const text = event.results[0][0].transcript.toLowerCase();
                addLog("you", text);
                userInput.value = "";
                handleCommand(text);
            };
            recognition.onerror = function() {
                addLog("bot", "Sorry, I couldn't hear you. Try again.");
                speak("Sorry, I couldn't hear you. Try again.");
            };
        }

        // Initialize the icon to the default blue state on load
        window.addEventListener('DOMContentLoaded', () => {
            updateChatToggleColor('normal');
        });
    </script>
</body>

</html>